<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2316981189550533"
     crossorigin="anonymous"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VIDU API - Free Movie & TV Download Links + Subtitles | Fast TMDb Tool</title>
  <meta name="description" content="VIDU API lets you instantly fetch download links and subtitles for movies and TV shows using TMDb ID. Fast, free, and developer-friendly.">
  <meta name="keywords" content="movie download, tv download, subtitles, TMDb, API, free movies, free tv, download tool, developer, streaming, VIDU">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="VIDU API - Free Movie & TV Download Links + Subtitles">
  <meta property="og:description" content="Fetch direct download links and subtitles for movies and TV shows using TMDb ID. Fast, free, and developer-friendly.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://viduapi.com/">
  <meta property="og:image" content="https://viduapi.com/og-image.png">
  <link rel="icon" type="image/png" href="vidu logo.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #3498db;         /* Bright blue */
      --primary-dark: #2980b9;    /* Darker blue for hover */
      --bg: #1e1e2f;              /* Dark slate background */
      --glass: rgba(30, 30, 40, 0.95);  /* Nearly opaque dark overlay */
      --border: #3498db44;        /* Primary with transparency */
      --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
      --radius: 1.5rem;
      --input-bg: #2c2e3e;        /* Slightly lighter than bg */
      --input-border: #3498db33;
      --input-focus: #3498db88;
      --text: #ffffff;            /* White text */
      --text-muted: #bdc3c7;      /* Light gray for muted text */
      --accent: #e74c3c;          /* Accent red color */
      --danger: #e74c3c;
    }

    /* Base responsive setup */
    html {
      font-size: 16px;
      scroll-behavior: smooth;
    }
    html, body {
      min-width: 0;
      width: 100%;
      overflow-x: hidden;
      background: var(--bg);
      margin: 0;
      padding: 0;
    }

    /* Standard input field styling */
    input {
      background: var(--input-bg);
      border: 1.5px solid var(--input-border);
      border-radius: 0.9rem;
      padding: 0.8rem 1rem;
      color: var(--text);
      font-size: 1.1rem;
      outline: none;
      transition: border 0.2s;
    }
    input:focus {
      border-color: var(--input-focus);
    }

    /* Button styling already in place applies to recaptcha OK button too */
    button {
      background: var(--primary);
      color: #000;
      border: none;
      border-radius: 0.9rem;
      padding: 1.1rem 2.1rem;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background 0.2s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    button:hover {
      background: var(--primary-dark);
    }

    /* Input-box styling (side-by-side layout on mobile) */
    .input-box {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 1rem;
      margin: 1.5rem auto;
      width: 90%;
      max-width: 900px;
      justify-content: center;
    }
    .input-box input, 
    .input-box button {
      flex: 1;
      min-width: 0;
      max-width: 200px;
      padding: 1.1rem 1.3rem;
      margin: 0;
      font-size: 1.13rem;
    }
    @media (max-width: 768px) {
      .input-box {
        flex-direction: row !important;
      }
      .input-box input, 
      .input-box button {
        width: auto;
      }
    }

    /* Math captcha styling */
    #math-captcha {
      width: 90%;
      max-width: 400px;
      margin: 1rem auto;
      padding: 1rem;
      background: var(--glass);
      border-radius: 0.7em;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: center;
    }
    #math-captcha input {
      width: 100%;
      max-width: 200px;
      padding: 0.5rem;
      border: 1px solid var(--primary);
      border-radius: 0.4em;
      color: var(--text);
      background: var(--input-bg);
    }
    #math-captcha button {
      padding: 0.4em 1em;
      border-radius: 0.5em;
      font-weight: 600;
      cursor: pointer;
    }
    #math-question {
      color: #ffffff;
      font-weight: bold;
    }

    /* Download dialog styling */
    .dialog {
      margin-top: 2.5rem;
      padding: 2.5rem 2rem;
      background: var(--glass);
      border: 2.5px solid var(--primary);
      border-radius: 1.2rem;
      box-shadow: 0 8px 40px var(--primary-dark), 0 2px 32px #000a;
      color: var(--text);
      font-size: 1.18rem;
      max-width: 1100px;
      margin: 2rem auto;
      display: none;
      position: relative;
      z-index: 30;
      animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1);
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Other CSS remains unchanged... */
    /* Header with Telegram button */
    header {
      position: relative;
      background: transparent;
      padding: 2.5rem 2rem 1rem 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      border-bottom: none;
      width: 100%;
      max-width: 100vw;
    }
    .telegram-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--primary);
      color: #000;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      text-decoration: none;
      font-weight: bold;
      font-size: 0.9rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: background 0.2s;
    }
    .telegram-btn:hover {
      background: var(--primary-dark);
    }
    .telegram-logo {
      width: 20px;
      height: 20px;
      object-fit: contain;
    }
    
    /* For smaller screens force the row layout even if space is tight */
    @media (max-width: 768px) {
      .input-box {
        flex-direction: row !important;
      }
      .input-box input, 
      .input-box button {
        width: auto;
      }
    }
    header {
      background: transparent;
      padding: 2.5rem 2rem 1rem 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      border-bottom: none;
      width: 100%;
      max-width: 100vw;
    }
    .brand {
      font-size: 2.7rem;
      font-weight: 800;
      color: var(--primary);
      letter-spacing: 2px;
      margin-bottom: 0.5rem;
      text-shadow: 0 2px 16px #00ffcc33;
    }
    nav {
      margin-top: 0.5rem;
      display: flex;
      gap: 2rem;
    }
    nav a {
      color: var(--text-muted);
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      letter-spacing: 1px;
      transition: color 0.2s;
      padding: 0.25em 0.5em;
      border-radius: 0.5em;
    }
    nav a:hover, nav a.active {
      color: var(--primary);
      background: #00ffcc11;
    }
    .wide-container {
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2vw;
      box-sizing: border-box;
    }
    .section-title {
      color: var(--primary);
      font-size: 2.1rem;
      font-weight: 700;
      margin-top: 2.5rem;
      margin-bottom: 1.2rem;
      letter-spacing: 1px;
    }
    .howto-list {
      margin: 0 0 2.5rem 0;
      padding: 0 0 0 1.2rem;
      color: var(--text-muted);
      font-size: 1.13rem;
      line-height: 1.8;
      max-width: 900px;
    }
    .search-bar {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      margin-bottom: 1.5rem;
      position: relative;
      width: 100%;
      max-width: 700px;
      justify-content: center;
      margin-left: auto;
      margin-right: auto;
      margin-top: 2.5rem;
    }
    .search-bar input[type="text"] {
      flex: 1;
      padding: 1.1rem 1.3rem;
      border-radius: 0.9rem;
      border: 1.5px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text);
      font-size: 1.18rem;
      outline: none;
      transition: border 0.2s;
    }
    .search-bar input[type="text"]:focus {
      border: 1.5px solid var(--input-focus);
    }
    .search-bar button {
      background: var(--primary);
      color: #000;
      border: none;
      border-radius: 0.9rem;
      padding: 1.1rem 2.1rem;
      font-weight: 700;
      font-size: 1.18rem;
      cursor: pointer;
      transition: background 0.2s;
      box-shadow: 0 2px 8px #00ffcc22;
    }
    .search-bar button:hover {
      background: var(--primary-dark);
    }
    .search-results {
      background: var(--glass);
      border: 1.5px solid var(--primary);
      border-radius: 0.7em;
      margin-top: 0.5em;
      max-height: 350px;
      overflow: auto;
      display: none;
      position: absolute;
      z-index: 20;
      width: 100%;
      left: 0;
      top: 110%;
      box-shadow: 0 4px 24px #000a;
      font-size: 1.13rem;
    }
    #searchResults .search-result-item {
      display: flex;
      align-items: center;
      gap: 1em;
      padding: 0.7em 1em;
      cursor: pointer;
      border-bottom: 1px solid #00ffcc22;
      transition: background 0.15s;
    }
    #searchResults .search-result-item:last-child {
      border-bottom: none;
    }
    #searchResults .search-result-item:hover {
      background: #00ffcc22;
    }
    #searchResults .poster-thumb {
      width: 48px;
      height: 72px;
      object-fit: cover;
      border-radius: 0.4em;
      background: #222;
      flex-shrink: 0;
      box-shadow: 0 2px 8px #0004;
    }
    .input-box {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 1rem;
      margin: 1.5rem auto;
      width: 100%;
      max-width: 900px;
      justify-content: center;
    }
    .input-box input, 
    .input-box button {
      flex: 1;
      min-width: 0;
      max-width: 200px;
      padding: 1.1rem 1.3rem;
      margin: 0;
      font-size: 1.13rem;
    }
    .dialog {
      margin-top: 2.5rem;
      padding: 2.5rem 2rem;
      background: var(--glass);
      border: 2.5px solid var(--primary);
      border-radius: 1.2rem;
      box-shadow: 0 8px 40px #00ffcc33, 0 2px 32px #000a;
      color: #fff;
      font-size: 1.18rem;
      max-width: 1100px;
      margin-left: auto;
      margin-right: auto;
      display: none;
      transition: box-shadow 0.2s;
      position: relative;
      z-index: 30;
      animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1);
    }
    .dialog h3 {
      color: var(--primary);
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
      font-size: 1.35rem;
      font-weight: 700;
    }
    .dialog .link-item {
      margin: 0.9rem 0;
      word-wrap: break-word;
      font-size: 1.13rem;
    }
    .dialog .link-item a {
      color: var(--primary);
      text-decoration: underline;
      font-weight: 600;
      transition: color 0.2s;
    }
    .dialog .link-item a:hover {
      color: #fff;
      background: #00ffcc22;
      border-radius: 0.3em;
    }
    .spinner {
      margin: 2rem auto;
      border: 6px solid #222;
      border-top: 6px solid var(--primary);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      animation: spin 1s linear infinite;
      display: block;
    }
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    .docs-section {
      margin-top: 3.5rem;
      margin-bottom: 3.5rem;
      width: 100%;
      max-width: 1200px;
      background: var(--glass);
      border-radius: 1.2rem;
      box-shadow: 0 8px 40px #00ffcc33, 0 2px 32px #000a;
      border: 2px solid var(--primary);
      padding: 2.5rem 2rem;
      color: #fff;
      font-size: 1.13rem;
      margin-left: auto;
      margin-right: auto;
    }
    .docs-section h2 {
      color: var(--primary);
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 1.2rem;
    }
    .docs-section code {
      background: #181f1f;
      color: var(--primary);
      border-radius: 0.4em;
      padding: 0.15em 0.4em;
      font-size: 1.08em;
    }
    .docs-section pre {
      background: #181f1f;
      color: #fff;
      border-radius: 0.7em;
      padding: 1.2em 1em;
      font-size: 1.08em;
      overflow-x: auto;
      margin: 1em 0;
    }
    .docs-section ul {
      margin: 0.5em 0 1.5em 1.5em;
      padding: 0;
      font-size: 1.08em;
    }
    .docs-section li {
      margin-bottom: 0.5em;
    }
    .about-section {
      margin-top: 3.5rem;
      margin-bottom: 3.5rem;
      width: 100%;
      max-width: 1200px;
      background: var(--glass);
      border-radius: 1.2rem;
      box-shadow: 0 8px 40px #00ffcc33, 0 2px 32px #000a;
      border: 2px solid var(--primary);
      padding: 2.5rem 2rem;
      color: #fff;
      font-size: 1.13rem;
      margin-left: auto;
      margin-right: auto;
    }
    .about-section h2 {
      color: var(--primary);
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 1.2rem;
    }
    footer {
      text-align: center;
      padding: 2rem;
      font-size: 0.95rem;
      color: #aaa;
      background: transparent;
      margin-top: 2rem;
      letter-spacing: 1px;
      width: 100%;
    }
    .brand-logo {
      width: 64px;
      height: 64px;
      margin-bottom: 0.5rem;
      display: block;
      border-radius: 20%;
      box-shadow: 0 2px 16px #00ffcc33;
      background: #fff;
      object-fit: contain;
    }
    /* Responsive styles */
    /* Mobile-first header */
    header {
      padding: 1rem;
      width: 100%;
      box-sizing: border-box;
    }

    .brand-logo {
      width: 48px;
      height: 48px;
      margin-bottom: 0.5rem;
    }

    .brand {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    nav {
      width: 100%;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 0.5rem 0;
    }

    nav a {
      padding: 0.5rem 1rem;
      font-size: 1rem;
    }

    /* Search bar mobile optimization */
    .search-bar {
      width: 90%;
      max-width: 600px;
      margin: 1rem auto;
      flex-direction: column;
      gap: 0.5rem;
    }

    .search-bar input[type="text"] {
      width: 100%;
      padding: 0.8rem 1rem;
      font-size: 1rem;
    }

    .search-bar button {
      width: 100%;
      padding: 0.8rem;
      font-size: 1rem;
    }

    .search-results {
      width: 100%;
      left: 0;
      max-height: 70vh;
    }

    /* Input box responsiveness */
    .input-box {
      width: 90%;
      max-width: 600px;
      margin: 1rem auto;
      flex-direction: column;
      gap: 0.5rem;
    }

    .input-box input, 
    .input-box button {
      width: 100%;
      min-width: 0;
      padding: 0.8rem;
      font-size: 1rem;
      margin: 0;
    }

    /* Dialog responsiveness */
    .dialog {
      width: 90%;
      margin: 1rem auto;
      padding: 1rem;
      font-size: 1rem;
      word-break: break-word;
    }

    .dialog h3 {
      font-size: 1.2rem;
      margin: 1rem 0 0.5rem 0;
    }

    .dialog .link-item {
      font-size: 0.95rem;
      margin: 0.7rem 0;
    }

    /* Math captcha mobile styling */
    #math-captcha {
      width: 90%;
      max-width: 400px;
      margin: 1rem auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: center;
    }

    #math-captcha input {
      width: 100%;
      max-width: 200px;
      padding: 0.5rem;
    }

    #math-captcha button {
      width: 100%;
      max-width: 200px;
    }

    /* Sections responsiveness */
    .docs-section,
    .about-section {
      width: 90%;
      margin: 2rem auto;
      padding: 1rem;
      font-size: 1rem;
    }

    .docs-section h2,
    .about-section h2 {
      font-size: 1.5rem;
    }

    .docs-section pre {
      max-width: 100%;
      overflow-x: auto;
      font-size: 0.9rem;
      padding: 0.8rem;
    }

    .docs-section code {
      font-size: 0.9rem;
      word-break: break-word;
    }

    /* Better spacing for mobile */
    .section-title {
      font-size: 1.5rem;
      margin: 2rem 0 1rem 0;
      padding: 0 1rem;
    }

    .howto-list {
      font-size: 1rem;
      padding: 0 2rem;
      margin: 1rem 0;
    }

    /* Responsive media queries */
    @media (min-width: 768px) {
      html {
        font-size: 16px;
      }

      .search-bar,
      .input-box {
        flex-direction: row;
      }

      .search-bar button,
      .input-box button {
        width: auto;
      }

      nav {
        gap: 2rem;
      }

      .brand-logo {
        width: 64px;
        height: 64px;
      }

      .brand {
        font-size: 2.7rem;
      }
    }

    @media (min-width: 1024px) {
      html {
        font-size: 18px;
      }

      .dialog,
      .docs-section,
      .about-section {
        padding: 2rem;
      }
    }

    /* Dark mode optimization */
    @media (prefers-color-scheme: dark) {
      .search-results,
      .dialog,
      .docs-section,
      .about-section {
        background: var(--glass);
      }
    }
  </style>
  <!-- SEO: Structured Data for better search engine visibility -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "VIDU API",
    "url": "https://viduapi.com/",
    "description": "Fetch direct download links and subtitles for movies and TV shows using TMDb ID. Fast, free, and developer-friendly.",
    "applicationCategory": "EntertainmentApplication",
    "operatingSystem": "All",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
</head>
<body>
  <header>
    <a href="https://t.me/+NZauYqQYdsNmNTA0" target="_blank" class="telegram-btn">
      <img src="telegram-logo.png" alt="Telegram" class="telegram-logo" />
      Telegram
    </a>
    <img src="vidu logo.png" alt="VIDU Logo" class="brand-logo" />
    <div class="brand">VIDU</div>
    <nav>
      <a href="#try" class="active">Try API</a>
      <a href="#docs">Docs</a>
      <a href="#about">About</a>
    </nav>
  </header>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search for a movie or TV show...">
    <button onclick="searchTmdb()">Search</button>
    <div id="searchResults" class="search-results"></div>
  </div>
  <div class="wide-container">
    <div class="section-title">How to Use</div>
    <ol class="howto-list">
      <li>Search for a movie or TV show by title, or enter a <b>TMDb ID</b> directly.</li>
      <li>For movies, leave <b>Season</b> and <b>Episode</b> blank or set both to 0.</li>
      <li>For TV shows, enter the <b>Season</b> and <b>Episode</b> numbers (both must be filled and not 0).</li>
      <li>Click <b>Download</b> to fetch available download links and subtitles.</li>
      <li>The title, year, and episode (if applicable) will be shown above the results.</li>
    </ol>

    <div class="section-title" id="try">Try the Download API</div>
    <div class="input-box">
      <input type="text" id="tmdbId" placeholder="TMDb ID" autofocus />
      <input type="number" id="season" placeholder="Season (optional)" min="0" />
      <input type="number" id="episode" placeholder="Episode (optional)" min="0" />
      <button onclick="showMathCaptcha()">Download</button>
    </div>
    <div id="math-captcha" style="display:none; margin-bottom:1.2rem; background:var(--glass); border-radius:0.7em; padding:1em; max-width:400px;">
      <span id="math-question" style="font-weight:bold;"></span>
      <input type="number" id="math-answer" placeholder="Your answer" style="margin:0 0.5em; border-radius:0.4em; border:1px solid var(--primary); padding:0.3em 0.7em; width:80px;">
      <button onclick="validateMathCaptcha()" style="background:var(--primary);color:#000;border:none;border-radius:0.5em;padding:0.4em 1em;font-weight:600;cursor:pointer;">OK</button>
      <span id="math-error" style="color:var(--danger);margin-left:1em;"></span>
    </div>
    <div class="dialog" id="dialog">
      <div id="spinner" class="spinner" style="display:none;"></div>
    </div>

    <section class="docs-section" id="docs">
      <h2>API Endpoint & Advanced Usage</h2>
      <p>
        <strong>Endpoint:</strong>
        <code>GET Api/{tmdb_id}</code> <br>
        <code>GET Api/{tmdb_id}/{season}/{episode}</code>
      </p>
      <ul>
        <li>
          <b>Movies:</b> Use <code>Api/{tmdb_id}</code>.<br>
          Example: <code>Api/293660</code> (Deadpool)
        </li>
        <li>
          <b>TV Shows:</b> Use <code>Api/{tmdb_id}/{season}/{episode}</code>.<br>
          Example: <code>Api/100088/1/1</code> (The Last of Us, Season 1 Episode 1)
        </li>
        <li>
          If <b>season</b> and <b>episode</b> are both <code>0</code> or left blank, the API treats the request as a movie.
        </li>
        <li>
          For TV shows, both <b>season</b> and <b>episode</b> must be provided and non-zero.
        </li>
      </ul>
      <p>
        <strong>Parameters:</strong>
        <ul>
          <li><code>{tmdb_id}</code> – The <b>TMDb ID</b> of the movie or TV show (integer, required).</li>
          <li><code>{season}</code> – The season number (integer, required for TV shows).</li>
          <li><code>{episode}</code> – The episode number (integer, required for TV shows).</li>
        </ul>
      </p>
      <p>
        <strong>Response Example:</strong>
        <pre><code>{
  "title": "The Last of Us - S1E1: When You're Lost in the Darkness",
  "year": "2023",
  "streams": [
    {
      "url": "https://macdn.hakunaymatata.com/resource/94c42e0146195a37dd5392abaad751b5.mp4",
      "quality": "360",
      "size": 279813098,
      "duration": 4847,
      "codecName": "h264",
      "subtitles": [
        {
          "lan": "en",
          "lanName": "English",
          "url": "https://cacdn.hakunaymatata.com/subtitle/b2284fb2be9ee06865f96fc0850fc346.srt"
        },
        {
          "lan": "fr",
          "lanName": "Français",
          "url": "https://cacdn.hakunaymatata.com/subtitle/a603287939e3bd7d6ff109456d59c53a.srt"
        }
        // ...more subtitles
      ]
    }
    // ...more streams (other qualities)
  ]
}</code></pre>
      </p>
      <p>
        <strong>Field Details:</strong>
        <ul>
          <li><code>title</code>: Full title, including season/episode for TV shows.</li>
          <li><code>year</code>: Release year.</li>
          <li><code>streams</code>: Array of available download options.
            <ul>
              <li><code>url</code>: Direct download link.</li>
              <li><code>quality</code>: Video quality (e.g., 720p, 1080p).</li>
              <li><code>size</code>: File size in bytes.</li>
              <li><code>duration</code>: Duration in seconds.</li>
              <li><code>subtitles</code>: Array of subtitle objects (language code, name, and URL).</li>
            </ul>
          </li>
        </ul>
      </p>
      <p>
        <strong>Notes:</strong>
        <ul>
          <li>All endpoints are <b>GET</b> requests.</li>
          <li>For best results, always use valid TMDb IDs. You can search for IDs using the search bar above.</li>
          <li>Rate limit: <b>60 requests/minute</b> per client.</li>
          <li>All download and subtitle links are direct and ready for use in apps or players.</li>
        </ul>
      </p>
    </section>

    <section class="about-section" id="about">
      <h2>About</h2>
      <p>
        This tool lets you instantly fetch download links and subtitles for movies and TV shows using their TMDb ID. It is designed for developers, researchers, and movie enthusiasts who want a fast, modern, and reliable API experience.
      </p>
      <p>
        All requests are encrypted and rate-limited for security and fairness. The UI is fully responsive and optimized for both desktop and mobile.
      </p>
      <p>
        <b>Share VIDU:</b>
        <a href="https://twitter.com/intent/tweet?text=Check%20out%20VIDU%20API%20for%20free%20movie%20and%20TV%20download%20links%20with%20subtitles!%20https://viduapi.com/" target="_blank" rel="noopener" style="color:var(--primary);text-decoration:underline;">Share on Twitter/X</a> &nbsp;|&nbsp;
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://viduapi.com/" target="_blank" rel="noopener" style="color:var(--primary);text-decoration:underline;">Share on Facebook</a>
      </p>
    </section>
  </div>
  <footer>
    &copy; 2025 VIDU. All rights reserved.
    <br>
    <span style="font-size:0.95em;color:#00ffcc;">Share: <a href="https://twitter.com/intent/tweet?text=Check%20out%20VIDU%20API%20for%20free%20movie%20and%20TV%20download%20links%20with%20subtitles!%20https://viduapi.com/" target="_blank" rel="noopener" style="color:var(--primary);">Twitter/X</a> | <a href="https://www.facebook.com/sharer/sharer.php?u=https://viduapi.com/" target="_blank" rel="noopener" style="color:var(--primary);">Facebook</a></span>
  </footer>
  <div class="telegram-notice" style="display:block; text-align: center; margin: 1rem auto; font-size: 1.2rem; color: var(--text); background: var(--glass); padding: 1rem; border-radius: 0.8rem; max-width: 600px;">
    <strong>Developers:</strong> If you want to integrate the download API into your website, join our 
    <a href="https://t.me/+NZauYqQYdsNmNTA0" target="_blank" style="color: var(--primary); text-decoration: underline;">
      Telegram group
    </a> for exclusive access to the API endpoint.
  </div>
  <script>
    // --- Anti-scrape math captcha (only positive answers) ---
    let mathAnswer = 0;
    let mathSolved = false;
    function showMathCaptcha() {
      // Only allow positive answers
      let a = Math.floor(Math.random() * 10) + 1;
      let b = Math.floor(Math.random() * 10) + 1;
      let op = Math.random() > 0.5 ? '+' : '-';
      if (op === '-' && b > a) [a, b] = [b, a]; // Ensure a >= b for subtraction
      mathAnswer = op === '+' ? a + b : a - b;
      document.getElementById('math-question').textContent = `What is ${a} ${op} ${b}?`;
      document.getElementById('math-answer').value = '';
      document.getElementById('math-error').textContent = '';
      document.getElementById('math-captcha').style.display = 'block';
      mathSolved = false;
    }
    function validateMathCaptcha() {
      const userAns = Number(document.getElementById('math-answer').value);
      if (userAns === mathAnswer) {
        document.getElementById('math-captcha').style.display = 'none';
        mathSolved = true;
        fetchData();
      } else {
        document.getElementById('math-error').textContent = 'Incorrect, try again!';
        mathSolved = false;
      }
    }
    // Always require captcha before any request
    function requireCaptchaThen(fn) {
      if (!mathSolved) {
        showMathCaptcha();
      } else {
        fn();
      }
    }
    // Prevent Enter key from submitting Download before captcha
    document.getElementById("tmdbId").addEventListener("keydown", function (e) {
      if (e.key === "Enter") showMathCaptcha();
    });
    // --- END math captcha ---

    // Remove rate limit note from docs
    document.addEventListener("DOMContentLoaded", function() {
      const notes = document.querySelectorAll('.docs-section ul li');
      notes.forEach(li => {
        if (li.textContent.includes('Rate limit')) li.style.display = 'none';
      });
    });

    // --- Backend communication (hide API from frontend) ---
    async function fetchData() {
      if (!mathSolved) {
        showMathCaptcha();
        return;
      }
      
      const tmdbId = document.getElementById('tmdbId').value.trim();
      const season = document.getElementById('season').value.trim();
      const episode = document.getElementById('episode').value.trim();
      const dialog = document.getElementById('dialog');
      
      // Show spinner while loading
      dialog.style.display = 'block';
      dialog.innerHTML = '<div id="spinner" class="spinner"></div>';

      if (!tmdbId) {
        alert('Please enter a valid TMDb ID');
        return;
      }

      try {
        // Use your production backend endpoint
        const response = await fetch('https://vidu-srp6.onrender.com/api/download', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ tmdbId, season, episode })
        });
        if (!response.ok) throw new Error('Failed to fetch data');

        const data = await response.json();
        let html = '';

        // Display title, year, and (if applicable) season and episode numbers
        if (data.title) {
          html += `<div style="margin-bottom:1em;">
            <strong style="font-size:1.25em;color:var(--primary);">${data.title}</strong>
            ${data.year ? `<span style="color:var(--text-muted);font-size:1.1em;"> (${data.year})</span>` : ''}
            ${
              (season && episode && season !== "0" && episode !== "0") 
              ? `<span style="color:var(--primary);font-size:1.1em;"> — Season ${season}, Episode ${episode}</span>`
              : ''
            }
          </div>`;
          if (data.episodeTitle) {
            html += `<div style="margin-bottom:1em;">
              <span style="color:var(--primary);font-size:1.1em;">Episode Title: ${data.episodeTitle}</span>
            </div>`;
          }
        }

        if (Array.isArray(data.streams) && data.streams.length > 0) {
          html += '<h3>Download Options:</h3>';
          data.streams.forEach(stream => {
            const size = stream.size ? Number(stream.size) : 0;
            const sizeStr = size > 0 ? (size > 1024 * 1024 * 1024
              ? (size / (1024 * 1024 * 1024)).toFixed(2) + ' GB'
              : (size / (1024 * 1024)).toFixed(2) + ' MB') : 'Unknown';
            const duration = stream.duration ? Number(stream.duration) : 0;
            const durationStr = duration > 0
              ? new Date(duration * 1000).toISOString().substr(11, 8)
              : 'Unknown';
            const quality = stream.resolutions || stream.quality || 'Unknown';

            html += `
              <div class='link-item'>
                <a href="${stream.url}" target="_blank">Download (${quality})</a>
                <span style="color:var(--text-muted); font-size:0.98em;">
                  &nbsp;| Size: ${sizeStr} | Duration: ${durationStr}
                </span>
              </div>
            `;
          });

          // Process subtitles and remove duplicates
          let allSubtitles = [];
          data.streams.forEach(stream => {
            if (Array.isArray(stream.subtitles)) {
              allSubtitles = allSubtitles.concat(stream.subtitles);
            }
          });
          allSubtitles = uniqueSubtitles(allSubtitles);
          html += '<h3>Subtitles:</h3>';
          if (allSubtitles.length > 0) {
            allSubtitles.forEach(sub => {
              html += `<div class='link-item'><a href="${sub.url}" target="_blank">${sub.lanName || sub.lan || 'Subtitle'}</a></div>`;
            });
          } else {
            html += `<p style="color:var(--text-muted);">No subtitles found.</p>`;
          }
        } else {
          html = `<p style="color:var(--danger);font-weight:bold;">No data found.</p>`;
        }
        
        // Update dialog with full details
        dialog.innerHTML = html;
        dialog.style.display = 'block';
      } catch (err) {
        dialog.style.display = 'block';
        dialog.innerHTML = `<p style='color: var(--danger); font-weight: bold;'>Error: ${err.message}</p>`;
      }
      mathSolved = false; // Require captcha for next request
    }

    // Remove duplicate subtitles by lan+url
    function uniqueSubtitles(subs) {
      const seen = new Set();
      return subs.filter(sub => {
        const key = (sub.lan || '') + (sub.url || '');
        if (seen.has(key)) return false;
        seen.add(key);
        return true;
      });
    }

    // Search TMDb (frontend only, not protected)
    async function searchTmdb() {
      const query = document.getElementById('searchInput').value.trim();
      const resultsDiv = document.getElementById('searchResults');
      resultsDiv.innerHTML = '';
      resultsDiv.style.display = 'none';
      if (!query) return;

      const apiKey = '4047600e7b714de665db30e862139d92';
      const url = `https://api.themoviedb.org/3/search/multi?api_key=${apiKey}&query=${encodeURIComponent(query)}`;
      const res = await fetch(url);
      const data = await res.json();

      if (!data.results || !data.results.length) {
        resultsDiv.innerHTML = '<div style="padding:1em;color:#ccc;">No results found.</div>';
        resultsDiv.style.display = 'block';
        return;
      }

      data.results.slice(0, 10).forEach(item => {
        if (item.media_type === 'movie' || item.media_type === 'tv') {
          const poster = item.poster_path
            ? `https://image.tmdb.org/t/p/w92${item.poster_path}`
            : 'https://via.placeholder.com/48x72?text=No+Image';
          const title = item.media_type === 'movie' ? item.title : item.name;
          const year = (item.release_date || item.first_air_date || '').slice(0, 4);
          const typeIcon = item.media_type === 'movie' ? '🎬' : '📺';
          resultsDiv.innerHTML += `
            <div class="search-result-item" onclick="selectTmdbResult('${item.id}','${item.media_type}','${(title || '').replace(/'/g,"\\'")}')">
              <img class="poster-thumb" src="${poster}" alt="Poster">
              <div>
                <b>${title}</b> <span style="color:var(--text-muted);">(${year})</span><br>
                <span style="font-size:0.95em;color:var(--primary);">${typeIcon} ${item.media_type.toUpperCase()}</span>
              </div>
            </div>
          `;
        }
      });
      resultsDiv.style.display = 'block';
    }

    function selectTmdbResult(id, type, name) {
      document.getElementById('searchResults').style.display = 'none';
      document.getElementById('tmdbId').value = id;
      if (type === 'movie') {
        document.getElementById('season').value = '';
        document.getElementById('episode').value = '';
        showMathCaptcha();
      } else if (type === 'tv') {
        let season = prompt(`Enter season number for "${name || 'this TV show'}":`);
        if (!season || isNaN(season) || Number(season) < 1) return alert('Invalid season.');
        let episode = prompt(`Enter episode number for season ${season}:`);
        if (!episode || isNaN(episode) || Number(episode) < 1) return alert('Invalid episode.');
        document.getElementById('season').value = season;
        document.getElementById('episode').value = episode;
        showMathCaptcha();
      }
    }
  </script>
</body>
</html>